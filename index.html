<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <meta name="theme-color" content="#3b2d1f" />
  <title>–ó–∞–ø–∏—Å–∫–∏ —Å—É–º–∞—Å—à–µ–¥—à–µ–≥–æ</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <header class="app-header">
    <div class="app-title">–ó–∞–ø–∏—Å–∫–∏ —Å—É–º–∞—Å—à–µ–¥—à–µ–≥–æ</div>
    <button id="btn-home" class="icon-btn" aria-label="–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é" title="–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é">üè†</button>
  </header>

  <main id="app" aria-live="polite"></main>

  <div id="toast" role="status" aria-live="polite" class="toast" hidden></div>
  <noscript><div class="noscript">–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–∫–ª—é—á–∏—Ç–µ JavaScript.</div></noscript>

  <!-- –í–∞–∂–Ω–æ: –æ–±—ã—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å defer -->
  <script src="./script.js" defer></script>

  <!-- –õ–æ–≤—É—à–∫–∏ –æ—à–∏–±–æ–∫ -->
  <script>
    (function(){
      function showErr(title, msg){
        var app = document.getElementById('app');
        if (!app) return;
        var box = document.createElement('div');
        box.className = 'card';
        box.style.margin = '1rem';
        box.innerHTML = '<h3>'+title+'</h3><pre style="white-space:pre-wrap;">'+msg+'</pre>';
        app.prepend(box);
      }
      window.addEventListener('error', function(e){
        showErr('JS-–æ—à–∏–±–∫–∞', (e.error && e.error.stack) ? e.error.stack : e.message);
      });
      window.addEventListener('unhandledrejection', function(e){
        showErr('–ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –ø—Ä–æ–º–∏—Å', (e.reason && e.reason.stack) ? e.reason.stack : String(e.reason));
      });

      // –°—Ç—Ä–∞–∂: –µ—Å–ª–∏ —Å–ø—É—Å—Ç—è 1500 –º—Å –Ω–∏—á–µ–≥–æ –Ω–µ –æ—Ç—Ä–∏—Å–æ–≤–∞–Ω–æ
      setTimeout(function(){
        var app = document.getElementById('app');
        if (!app || app.childElementCount) return;
        var base = location.origin + location.pathname.replace(/[^/]*$/,'');
        app.innerHTML = '<div class="card"><h3>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å</h3>'
          + '<p>–ü—Ä–æ–≤–µ—Ä—å –ø—É—Ç—å –∫ <code>script.js</code> –∏ —á—Ç–æ —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:</p>'
          + '<p><code>'+ base +'script.js</code></p>'
          + '<p class="muted">–ï—Å–ª–∏ —Ñ–∞–π–ª –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –Ω–æ —Ç—É—Ç –ø—É—Å—Ç–æ ‚Äî –∑–Ω–∞—á–∏—Ç –≤ —Ä–∞–Ω—Ç–∞–π–º–µ –µ—Å—Ç—å –æ—à–∏–±–∫–∞. –°–º–æ—Ç—Ä–∏ –±–ª–æ–∫–∏ ¬´JS-–æ—à–∏–±–∫–∞¬ª –≤—ã—à–µ.</p>'
          + '</div>';
      }, 1500);
    })();
  </script>
</body>
</html>
